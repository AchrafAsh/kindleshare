{"ast":null,"code":"import _defineProperty from\"/home/achraf/Documents/Coding/kindleshare/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/achraf/Documents/Coding/kindleshare/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/achraf/Documents/Coding/kindleshare/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/achraf/Documents/Coding/kindleshare/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/achraf/Documents/Coding/kindleshare/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/achraf/Documents/Coding/kindleshare/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Container,Form,FormGroup,Label,Input,Button,Alert}from'reactstrap';import{Redirect}from'react-router-dom';import{connect}from'react-redux';import{signin}from'../../actions/authActions';import{clearErrors}from'../../actions/errorActions';var Signin=/*#__PURE__*/function(_Component){_inherits(Signin,_Component);function Signin(){var _getPrototypeOf2;var _this;_classCallCheck(this,Signin);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Signin)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={email:'',password:'',msg:null};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.handleSubmit=function(e){_this.props.clearErrors();e.preventDefault();var _this$state=_this.state,email=_this$state.email,password=_this$state.password;var user={email:email,password:password};_this.props.signin(user);};return _this;}_createClass(Signin,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var error=this.props.error;if(error!==prevProps.error){if(error.id==='SIGNIN_FAIL'){this.setState({msg:error.msg.msg});}else{this.setState({msg:null});}}}},{key:\"render\",value:function render(){if(this.props.isAuthenticated)return React.createElement(Redirect,{to:\"/\"});return React.createElement(Container,null,this.state.msg?React.createElement(Alert,{color:\"danger\"},this.state.msg):null,React.createElement(Form,{onSubmit:this.handleSubmit},React.createElement(FormGroup,null,React.createElement(Label,{for:\"name\"},\"Email\"),React.createElement(Input,{onChange:this.handleChange,type:\"email\",name:\"email\",placeholder:\"Email\"})),React.createElement(FormGroup,null,React.createElement(Label,{for:\"password\"},\"Pasword\"),React.createElement(Input,{onChange:this.handleChange,type:\"password\",name:\"password\",placeholder:\"Password\"})),React.createElement(Button,null,\"Login\")));}}]);return Signin;}(Component);var mapStateToProps=function mapStateToProps(state){return{isAuthenticated:state.auth.isAuthenticated,error:state.error};};export default connect(mapStateToProps,{signin:signin,clearErrors:clearErrors})(Signin);","map":{"version":3,"sources":["/home/achraf/Documents/Coding/kindleshare/client/src/components/auth/Signin.js"],"names":["React","Component","Container","Form","FormGroup","Label","Input","Button","Alert","Redirect","connect","signin","clearErrors","Signin","state","email","password","msg","handleChange","e","setState","target","name","value","handleSubmit","props","preventDefault","user","prevProps","error","id","isAuthenticated","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Form, FormGroup, Label, Input, Button, Alert } from 'reactstrap';\nimport { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { signin } from '../../actions/authActions';\nimport { clearErrors } from '../../actions/errorActions'\n\nclass Signin extends Component {\n    state = {\n        email: '',\n        password: '',\n        msg: null\n    }\n\n    static propTypes = {\n        isAuthenticated: PropTypes.bool,\n        error: PropTypes.object.isRequired,\n        signin: PropTypes.func.isRequired,\n        clearErrors: PropTypes.func.isRequired\n    }\n\n    componentDidUpdate(prevProps) {\n        const { error } = this.props;\n        if(error !== prevProps.error) {\n            if(error.id === 'SIGNIN_FAIL') {\n                this.setState({ msg: error.msg.msg })\n            } else {\n                this.setState({ msg: null })\n            }\n        }\n    }\n\n    handleChange = e => {\n        this.setState({\n            [e.target.name]: e.target.value\n        })\n    }\n\n    handleSubmit = (e) => {\n        this.props.clearErrors();\n        e.preventDefault();\n        const { email, password } = this.state;\n        const user = {\n            email,\n            password\n        };\n        this.props.signin(user);\n    }\n\n    render() {\n        if (this.props.isAuthenticated) return <Redirect to=\"/\"/>\n        return (\n            <Container>\n                {  this.state.msg ? <Alert color=\"danger\">{ this.state.msg }</Alert> : null }\n                <Form onSubmit={this.handleSubmit}>\n                    <FormGroup>\n                        <Label for=\"name\">Email</Label>\n                        <Input onChange={this.handleChange} type=\"email\" name=\"email\" placeholder=\"Email\" />\n                    </FormGroup>\n                    <FormGroup>\n                        <Label for=\"password\">Pasword</Label>\n                        <Input onChange={this.handleChange} type=\"password\" name=\"password\" placeholder=\"Password\" />\n                    </FormGroup>\n                    <Button>Login</Button>\n                </Form>\n            </Container>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    isAuthenticated: state.auth.isAuthenticated,\n    error: state.error\n})\n\n\nexport default connect(mapStateToProps, { signin, clearErrors })(Signin);"]},"metadata":{},"sourceType":"module"}